/** tt.js version:0.2.0 author:kei takahashi(twitter@dameleon) at:2013-03-14 */
(function(t,e,n,r,i){"use strict";function s(t,i){var s=null,a="";if("string"==typeof t)a=t,i=i||e,s=d.test(t)?i.querySelectorAll(t):"#"===t[0]?[i.getElementById(t.substring(1,t.length))]:"."===t[0]?i.getElementsByClassName(t.substring(1,t.length)):i.getElementsByTagName(t);else if(t)if(1===t.nodeType)s=[t];else if(r(t)||n(t)&&t.length&&t[0].nodeType)s=t;else if(t===e||t===e.body)s=[e.body];else{if("function"!=typeof t){if(t instanceof o)return t;throw Error("argument type error")}g?t():y.push(t)}return new o(s||[],a)}function o(t,e){var n,r=0;for(this.selector=e,this.length=n=t.length,this._delegates={},this._data={};n>r;++r)this[r]=t[r];return this}function a(t){return this.each(function(){this.classList.add(t)})}function c(t){function e(t,e){var n=t.split(" ");return n[n.length]=e,n.join(" ")}var n=this[0].className,r=e(n,t);return this.each(function(i){s(this).hasClass(t)||(i&&n!==this.className&&(n=this.className,r=e(n,t)),this.className=r)})}function u(t){return this.each(function(){this.classList.remove(t)})}function h(t){return t=" "+t+" ",this.each(function(){this.className=(" "+this.className+" ").replace(t,"")})}function l(t){var e=this.match(function(){return this.classList.contains(t)});return e?!0:!1}function f(t){return this.match(function(){return(" "+this.className+" ").indexOf(" "+t+" ")>-1})}var p="tt",d=/^(.+[\#\.\s\[>:,]|[\[:])/,g=!1,y=[],m=e.createElement("div");Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),r=n.length;return function(i){if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError("Object.keys called on non-object");var s,o=[];for(s in i)t.call(i,s),o.push(s);if(e){for(s=0;r>s;s++)t.call(i,n[s]),o.push(n[s]);return o}}}()),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),e.addEventListener("DOMContentLoaded",function(){g=!0;for(var t=0,e=y.length;e>t;++t)y[t]()},!1),s.isArray=n,s.isNodeList=r,s.type=function(i,s){var o=null===i?"null":i===void 0?"undefined":i===t?"window":i===e?"document":i.nodeType?"node":n(i)?"array":r(i)?"nodelist":"";if(o||(o=typeof i,"object"===o&&(o=Object.prototype.toString.call(i).toLowerCase().match(/.*\s([a-z]*)\]/)[1])),s){if(n(s)){for(var a=0,c=s.length;c>a;++a)if(s[a]===o)return!0;return!1}return s===o}return o},s.each=function(t,e){var r,i,s,o=0;if(n(t))for(s=t.length;s>o;++o)e(t[o],o);else if("object"==typeof t)for(r=Object.keys(t),s=r.length;s>o;++o)i=r[o],e(i,t[i])},s.match=function(t,e){var r,i,s,o={},a=0;if(n(t)){for(s=t.length;s>a;++a)if(e(t[a],a))return t[a]}else if("object"==typeof t)for(r=Object.keys(t),s=r.length;s>a;++a)if(i=r[a],e(i,t[i],a))return o[i]=t[i],o;return null},s.extend=function(){function t(t){a&&s.type(n[t],"object")&&s.type(e[t],"object")?s.extend(n[t],e[t]):n[t]=e[t]}var e,n,r=[].slice.call(arguments),i=1,o=r.length,a=!1;for(r[0]===!0&&(a=!0,++i),n=r[i-1]||{};o>i;++i)e=r[i],"object"===s.type(e)&&s.each(Object.keys(e),t);return n},s.proxy=function(){if(2>arguments.length)throw Error("Error: missing argument error");var t,e=[].slice.call(arguments),n=e.shift(),r=e.shift();return"string"==typeof r&&(t=n[r],r=n,n=t),function(){return n.apply(r,e)}},s.parseJSON=function(t){if(!t)return{};if("object"==typeof t)return t;var e;try{return e=JSON.parse(t)}catch(n){}try{e=Function("return "+t)()}catch(r){throw Error("Error: can't parse text to json")}return e},s.query2object=function(t){if(!s.type(t,"string"))return{};for(var e={},n=t.split("&"),r=0,i=n.length;i>r;++r){var o=n[r].split("=");e[o[0]]=o[1]}return e},s.param=function(t){if(!s.type(t,"object"))return t;for(var e,n=Object.keys(t),r=0,i=n.length,o=[];i>r;++r)e=n[r],o.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return o.join("&")},s.triggerEvent=function(t,n,r,s,o){if(!t||!n)throw Error("Error: missing argument error");"string"!=typeof r&&(r=n,n="click"===r?"MouseEvents":"Event");var a=e.createEvent(n);a.initEvent(r,s===i?!1:s,o===i?!1:o),t.dispatchEvent(a)},s.cssPrefix=function(t,e){var n=[];return e=e||["webkit","moz","o","ms","khtml"],s.each(e,function(e,r){n[r]="-"+e+"-"+t}),n},s.cssCamelizer=function(t){if(!t||"string"!=typeof t)throw Error("Error: argument error");var e="";return"-"===t[0]&&(t=t.substr(1,t.length)),s.each(t.split("-"),function(t,n){return n?(e+=t[0].toUpperCase()+t.substr(1,t.length),i):(e+=t,i)}),e},s.cssHyphenizer=function(t){if(!t||"string"!=typeof t)throw Error("Error: argument error");var e=["webkit","moz","o","ms","khtml"],n=/[A-Z]/g,r=t.match(n),o="";return s.each(t.split(n),function(t,n){return e.indexOf(t)>-1?(o+="-"+t,i):n?(o+="-"+r.shift().toLowerCase()+t,i):(o+=t,i)}),o},s.tag=function(t,n){if(!t||"string"!=typeof t)throw Error("Error: argument error");var r=e.createElement(t);return n?r:s(r)},s.createEnvData=function(e){function n(t){if(!t)return null;var e,n=4,r=0;return t=t.replace(/\D/g,""),r=n-t.length,e=r>0?+t*Math.pow(10,r):+t}var r={},i=(e||t.navigator).userAgent.toLowerCase();return r.android=/android/.test(i),r.ios=/ip(hone|od|ad)/.test(i),r.android||r.ios||(r.windowsPhone=/windows\sphone/.test(i),r.ie=/msie/.test(i)),r.chrome=/(chrome|crios)/.test(i),r.firefox=/firefox/.test(i),r.opera=/opera/.test(i),r.androidBrowser=!r.chrome&&r.android&&/applewebkit/.test(i),r.mobileSafari=!r.chrome&&r.ios&&/applewebkit/.test(i),r.version=r.androidBrowser||r.android&&r.chrome?i.match(/android\s(\S.*?)\;/):r.mobileSafari||r.ios&&r.chrome?i.match(/os\s(\S.*?)\s/):null,r.version=r.version?r.ios?r.version[1].replace("_","."):r.version[1]:null,r.versionCode=n(r.version),r.supportTouch="ontouchstart"in t,r},s.env=s.createEnvData(navigator),s.ajax=function(t,n){function r(t){if(!i){i=!0;var e,r=n.context;t>=200&&400>t?(e=o.response,"json"===n.dataType&&s.type(e,"string")&&(e=s.parseJSON(e)),n.success&&n.success.apply(r,[e,t,o])):n.error&&n.error.apply(r,[o,t]),n.complete&&n.complete.apply(r,[o,t]),o=null}}var i=!1,o=new XMLHttpRequest;if(n=n||{},s.type(t,"object"))n=t;else{if(!s.type(t,"string"))throw Error("Error: missing argument");n.url=t}if(n=s.extend({async:!0,beforeSend:null,cache:!0,complete:null,contentType:"application/x-www-form-urlencoded; charset=UTF-8",context:e.body,data:null,dataType:"text",error:null,headers:null,mimeType:null,success:null,timeout:0,type:"GET",url:"",user:"",password:""},n),n.type=n.type.toUpperCase(),n.data&&"GET"===n.type?(n.url=n.url+n.url.indexOf("?")>-1?"&":"?"+s.param(n.data),n.data=null):n.data=s.param(n.data),o.onerror=function(){r(0)},o.onreadystatechange=function(){4===o.readyState&&r(o.status)},o.open(n.type,n.url,n.async,n.user,n.password),"POST"===n.type&&(o.setRequestHeader("Content-type",n.contentType),o.setRequestHeader("Content-length",n.data.length)),s.type(n.headers,"object")&&s.each(n.headers,function(t,e){o.setRequestHeader(t,e)}),n.dataType)try{o.responseType=n.dataType}catch(a){o.responseType="text"}return n.mimeType&&o.overrideMimeType(n.mimeType),n.beforeSend&&n.beforeSend(o),n.timeout&&(o.timeout=n.timeout),o.send(n.data),o},o.prototype=s.fn={constructor:o,get:function(t){return this[t||0]},toArray:function(){var t=[];return this.each(function(e){t[e]=this}),t},each:function(t){for(var e=0,n=this.length;n>e;++e)t.call(this[e],e);return this},match:function(t){for(var e=0,n=this.length;n>e;++e)if(t.call(this[e],e))return this[e];return null},on:function(t,e,n){return s.type(e,"string")?this.delegate(e,t,n):this.bind(t,e),this},off:function(t,e,n){return s.type(e,"string")?this.undelegate(e,t,n):this.unbind(t,e),this},bind:function(t,e,n){return n=n||!1,this.each(function(){this.addEventListener(t,e,n)},!0),this},unbind:function(t,e){return this.each(function(){this.removeEventListener(t,e)},!0),this},delegate:function(e,n,r){var i=this._delegates[n],o={target:e,callback:r};return i||(i=this._delegate[n]={},i.listeners=[],i.handler=function(e){var n,r=e.target;s.match(i.listeners,function(i){var o=s(i.target).match(function(){var e=this.compareDocumentPosition(r);return 0===e||e&t.Node.DOCUMENT_POSITION_CONTAINED_BY?!0:!1});return o?(n=s.extend({},e),n.currentTarget=o,"function"==typeof i.callback?i.callback(n):"handleEvent"in i.callback&&i.callback.handleEvent(n),!0):!1})},this.bind(n,i.handler)),i.listeners.push(o),this},undelegate:function(t,e,n){var r=this._delegates[e],i=r.listeners;return i&&0!==i.length?(s.match(i,function(e,r){return e.target===t&&e.callback===n?(i.splice(r,1),!0):!1}),0===i.length&&(this.unbind(e,r.handler),r=this._delegates[e]={}),this):this},addClass:m.classList?a:c,removeClass:m.classList?u:h,hasClass:m.classList?l:f,toggleClass:function(t,e){var n=this;return e?n.each(function(){var e=s(this);e.hasClass(t)?e.removeClass(t):e.addClass(t)}):s(n[0]).hasClass(t)?n.removeClass(t):n.addClass(t),this},find:function(t){var e=[];return this.each(function(){e=e.concat(s(t,this).toArray())}),s(e)},contains:function(t){var e,n=s(t);return e=this.match(function(){var t=this,e=n.match(function(){var e=t.compareDocumentPosition(this);return 0===e||e&Node.DOCUMENT_POSITION_CONTAINED_BY?!0:!1});return e?!0:!1})},attr:function(t,e){function n(t,e){(e===i||null===e)&&(e=""),o.each(function(){return""===e?(this.removeAttribute(t),i):(this.setAttribute(t,e),i)})}var r,o=this;switch(arguments.length){case 1:if("object"!=typeof t)return this[0].getAttribute(t);s.each(t,function(){n(r,t[r])});break;case 2:n(t,e)}return this},html:function(t){return t===i||null===t?this[0].innerHTML:(t.nodeType?this.clear().append(t):this.each(function(){for(;this.firstChild;)this.removeChild(this.firstChild);this.insertAdjacentHTML("afterbegin",t)}),this)},append:function(t){return this.each("string"==typeof t?function(){this.insertAdjacentHTML("beforeend",t)}:function(){this.appendChild(t)}),this},prepend:function(t){return this.each("string"==typeof t?function(){this.insertAdjacentHTML("afterbegin",t)}:function(){this.insertBefore(t,this.firstChild)}),this},remove:function(){return this.each(function(){this.parentNode.removeChild(this)}),this},clear:function(){return this.each(function(){for(;this.firstChild;)this.removeChild(this.firstChild)}),this},replace:function(t){return this.each("string"==typeof t?function(){this.insertAdjacentHTML("beforebegin",t)}:function(){this.parentNode.insertBefore(t,this)}),this.remove(),this},css:function(e,n){function r(t){a.each(function(){this.style.removeProperty(t)})}function o(t,e){a.each(function(){this.style[t]=e})}var a=this;if("object"==typeof e)s.each(e,function(t,e){return""===e?(r(t),i):(o(s.cssCamelizer(t),e),i)});else if(e)if(n)o(s.cssCamelizer(e),n);else{if(""!==n)return t.getComputedStyle(this[0]).getPropertyValue(e);r(e)}return this},data:function(){function t(t,e){this.each(function(){return""===e?(delete this.dataset[t],i):(this.dataset[t]=e,i)})}function e(t){return this[0]?t?this[0].dataset[t]:this[0].dataset:null}function n(t,e){this.attr("data-"+t,e)}function r(t){var e,n={},r="data-",i=this[0],s=i.attributes,o=0,a=s.length;if(!i)return null;if(t)return r+=t,this.attr(r);for(;a>o;++o)e=s[o].name,e.indexOf(r)>-1&&(t=e.substr(5,e.length),n[t]=s[o].value);return n}var o=m.dataset,a=o?e:r,c=o?t:n;return function(t,e){var n=this;switch(arguments.length){case 0:return a.call(this);case 1:return"object"==typeof t?(s.each(t,function(t,e){c.call(n,t,e)}),this):a.call(this,t);case 2:return c.call(this,t,e),this}}}(),show:function(t){var e=this.css("display"),n=this._data.beforeDisplay||null;if("none"===e)return this.css("display",t||n||"block")},hide:function(){var t=this.css("display");return"none"!==t&&(this._data.beforeDisplay=t),this.css("display","none")},trigger:function(t,e,n,r){return this.each(function(){s.triggerEvent(this,t,e,n,r)}),this},offset:function(){var e=[];return this.each(function(n){var r=this.getBoundingClientRect();e[n]={left:r.left+t.pageXOffset,top:r.top+t.pageYOffset}}),1===this.length?e[0]:e}},t[p]=t[p]||s})(this.self||global,document,Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),function(t){var e=Object.prototype.toString.call(t);return"[object NodeList]"===e||"[object HTMLCollection]"===e});