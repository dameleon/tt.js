/** tt.js version:0.4.0 author:kei takahashi(twitter@dameleon) at:2013-03-26 */
(function(t,e,n){"use strict";function r(t,r){var s=null,o="";if("string"==typeof t)o=t,r=r||e,s=j.test(t)?r.querySelectorAll(t):"#"===t[0]?[r.getElementById(t.substring(1,t.length))]:"."===t[0]?r.getElementsByClassName(t.substring(1,t.length)):r.getElementsByTagName(t);else if(t)if(1===t.nodeType)s=[t];else if(u(t)||Array.isArray(t)&&t.length&&t[0].nodeType)s=t;else{if(t!==e&&t!==e.body){if("function"==typeof t)return T?t():O.push(t),n;if(t instanceof i)return t;throw Error("argument type error")}s=[e.body]}return new i(s||[],o)}function i(t,e){var n,r=0;for(this.selector=e,this.length=n=t.length,this._delegates={},this._data={};n>r;++r)this[r]=t[r];return this}function s(t,e){var n,r,i,s=0;if(Array.isArray(t))for(i=t.length;i>s;++s)e(t[s],s);else if("object"==typeof t)for(n=Object.keys(t),i=n.length;i>s;++s)r=n[s],e(r,t[r])}function o(){function t(t){u&&c(n[t],"object")&&c(e[t],"object")?o(n[t],e[t]):n[t]=e[t]}var e,n,r=[].slice.call(arguments),i=1,a=r.length,u=!1;for(r[0]===!0&&(u=!0,++i),n=r[i-1]||{};a>i;++i)e=r[i],"object"===c(e)&&s(Object.keys(e),t);return n}function a(t,e){var n,r,i,s={},o=0;if(Array.isArray(t)){for(i=t.length;i>o;++o)if(e(t[o],o))return t[o]}else if("object"==typeof t)for(n=Object.keys(t),i=n.length;i>o;++o)if(r=n[o],e(r,t[r],o))return s[r]=t[r],s;return null}function u(t){var e=Object.prototype.toString.call(t);return"[object NodeList]"===e||"[object HTMLCollection]"===e}function c(r,i){var s=null===r?"null":r===void 0?"undefined":r===t?"global":r===e?"document":r.nodeType?"node":Array.isArray(r)?"array":u(r)?"nodelist":n;if(s||(s=typeof r,"object"===s&&(s=Object.prototype.toString.call(r).toLowerCase().match(/.*\s([a-z]*)\]/)[1])),i){if(Array.isArray(i)){for(var o=0,a=i.length;a>o;++o)if(i[o]===s)return!0;return!1}return i===s}return s}function h(t,n){function r(t){if(!i){i=!0;var e,r=n.context;t>=200&&400>t?(e=a.response||a.responseText,"json"===n.dataType&&c(e,"string")&&(e=y(e)),n.success&&n.success.apply(r,[e,t,a])):n.error&&n.error.apply(r,[a,t]),n.complete&&n.complete.apply(r,[a,t]),a=null}}var i=!1,a=new XMLHttpRequest;if(n=n||{},c(t,"object"))n=t;else{if(!c(t,"string"))throw Error("Error: missing argument");n.url=t}if(n=o({async:!0,beforeSend:null,cache:!0,complete:null,contentType:"application/x-www-form-urlencoded; charset=UTF-8",context:e.body,data:null,dataType:"text",error:null,headers:null,mimeType:null,success:null,timeout:0,type:"GET",url:"",user:"",password:""},n),n.type=n.type.toUpperCase(),n.data&&"GET"===n.type?(n.url=n.url+n.url.indexOf("?")>-1?"&":"?"+g(n.data),n.data=null):n.data=g(n.data),a.onerror=function(){r(0)},a.onreadystatechange=function(){4===a.readyState&&r(a.status)},a.open(n.type,n.url,n.async,n.user,n.password),"POST"===n.type&&(a.setRequestHeader("Content-type",n.contentType),a.setRequestHeader("Content-length",n.data.length)),c(n.headers,"object")&&s(n.headers,function(t,e){a.setRequestHeader(t,e)}),n.dataType)try{a.responseType=n.dataType}catch(u){a.responseType="text"}return n.mimeType&&a.overrideMimeType(n.mimeType),n.beforeSend&&n.beforeSend(a),n.timeout&&(a.timeout=n.timeout),a.send(n.data),a}function l(e){function n(t){if(!t)return null;var e,n=4,r=0;return t=t.replace(/\D/g,""),r=n-t.length,e=r>0?+t*Math.pow(10,r):+t}var r={},i=(e||t.navigator).userAgent.toLowerCase();return r.android=/android/.test(i),r.ios=/ip(hone|od|ad)/.test(i),r.android||r.ios||(r.windowsPhone=/windows\sphone/.test(i),r.ie=/msie/.test(i)),r.chrome=/(chrome|crios)/.test(i),r.firefox=/firefox/.test(i),r.opera=/opera/.test(i),r.androidBrowser=!r.chrome&&r.android&&/applewebkit/.test(i),r.mobileSafari=!r.chrome&&r.ios&&/applewebkit/.test(i),r.version=r.androidBrowser||r.android&&r.chrome?i.match(/android\s(\S.*?)\;/):r.mobileSafari||r.ios&&r.chrome?i.match(/os\s(\S.*?)\s/):null,r.version=r.version?r.ios?r.version[1].replace("_","."):r.version[1]:null,r.versionCode=n(r.version),r.supportTouch="ontouchstart"in t,r}function f(t){if(!t||"string"!=typeof t)throw Error("Error: argument error");var e="";return"-"===t[0]&&(t=t.substr(1,t.length)),r.each(t.split("-"),function(t,r){return r?(e+=t[0].toUpperCase()+t.substr(1,t.length),n):(e+=t,n)}),e}function d(t){if(!t||"string"!=typeof t)throw Error("Error: argument error");var e=["webkit","moz","o","ms","khtml"],r=/[A-Z]/g,i=t.match(r),o="";return s(t.split(r),function(t,r){return e.indexOf(t)>-1?(o+="-"+t,n):r?(o+="-"+i.shift().toLowerCase()+t,n):(o+=t,n)}),o}function p(t,e){var n=[];return e=e||["webkit","moz","o","ms","khtml"],s(e,function(e,r){n[r]="-"+e+"-"+t}),n}function g(t){if(!c(t,"object"))return t;for(var e,n=Object.keys(t),r=0,i=n.length,s=[];i>r;++r)e=n[r],s.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return s.join("&")}function y(t){if(!t)return{};if("object"==typeof t)return t;var e;try{return e=JSON.parse(t)}catch(n){}try{e=Function("return "+t)()}catch(r){throw Error("Error: can't parse text to json")}return e}function v(){if(2>arguments.length)throw Error("Error: missing argument error");var t,e=[].slice.call(arguments),n=e.shift(),r=e.shift();return"string"==typeof r&&(t=n[r],r=n,n=t),function(){return n.apply(r,e)}}function m(t){if(!c(t,"string"))return{};"?"===t[0]&&(t=t.substr(1,t.length));for(var e={},n=t.split("&"),r=0,i=n.length;i>r;++r){var s=n[r].split("=");e[s[0]]=s[1]}return e}function b(t,n){if(!t||"string"!=typeof t)throw Error("Error: argument error");var i=e.createElement(t);return n?i:r(i)}function C(t,r,i,s,o){if(!t||!r)throw Error("Error: missing argument error");"string"!=typeof i&&(i=r,r="click"===i?"MouseEvents":"Event");var a=e.createEvent(r);a.initEvent(i,s===n?!1:s,o===n?!1:o),t.dispatchEvent(a)}var E="tt",j=/^(.+[\#\.\s\[\*>:,]|[\[:])/,T=!1,O=[],w=l(t.navigator),N=e.createElement("div");e.addEventListener("DOMContentLoaded",function(){T=!0;for(var t=0,e=O.length;e>t;++t)O[t]()},!1),Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError("Object.keys called on non-object");var s=[];for(var o in i)t.call(i,o)&&s.push(o);if(e)for(var a=0;r>a;a++)t.call(i,n[a])&&s.push(n[a]);return s}}()),Array.isArray&&(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Node.contains||(Node.contains=function(t){var e=this.compareDocumentPosition(t);return 0===e||e&Node.DOCUMENT_POSITION_CONTAINED_BY}),r.ajax=h,r.createEnvData=l,r.cssCamelizer=f,r.cssHyphenizer=d,r.cssPrefix=p,r.each=s,r.extend=o,r.env=w,r.isArray=Array.isArray,r.isNodeList=u,r.match=a,r.param=g,r.parseJSON=y,r.proxy=v,r.query2object=m,r.tag=b,r.triggerEvent=C,r.type=c,r.fn=i.prototype={constructor:i,get:function(t){return this[t||0]},toArray:function(){var t=[];return this.each(function(e){t[e]=this}),t},each:function(t){for(var e=0,n=this.length;n>e;++e)t.call(this[e],e);return this},match:function(t){for(var e=0,n=this.length;n>e;++e)if(t.call(this[e],e))return this[e];return null},push:function(t){if(t&&t.nodeType)this[this.length]=t,++this.length;else if(c(t,["array","nodelist"]))for(var e=0,n=t.length;n>e;++e)this[this.length]=t[e],++this.length;return this},indexOf:function(t){var e=-1;return this.match(function(n){return this===t?(e=n,!0):!1}),e},on:function(t,e,n){return c(e,"string")?this.delegate(t,e,n):this.bind(t,e),this},off:function(t,e,n){return c(e,"string")?this.undelegate(t,e,n):this.unbind(t,e),this},bind:function(t,e,n){return n=n||!1,this.each(function(){this.addEventListener(t,e,n)},!0),this},unbind:function(t,e){return this.each(function(){this.removeEventListener(t,e)},!0),this},delegate:function(t,e,n){var i=this._delegates[t],s={target:e,callback:n};return i||(i=this._delegates[t]={},i.listeners=[],i.handler=function(t){var e=t.target;a(i.listeners,function(n){var i=r(n.target).match(function(){return this.contains(e)?!0:!1});return i?("function"==typeof n.callback?n.callback.call(i,t):"handleEvent"in n.callback&&n.callback.handleEvent.call(i,t),!0):!1})},this.bind(t,i.handler)),i.listeners.push(s),this},undelegate:function(t,e,n){var r=this._delegates[t],i=r.listeners;return i&&0!==i.length?(a(i,function(t,r){return t.target===e&&t.callback===n?(i.splice(r,1),!0):!1}),0===i.length&&(this.unbind(t,r.handler),r=this._delegates[t]={}),this):this},addClass:N.classList?function(t){return this.each(function(){this.classList.add(t)})}:function(t){function e(t,e){var n=t.split(" ");return n[n.length]=e,n.join(" ")}var n=this[0].className,i=e(n,t);return this.each(function(s){r(this).hasClass(t)||(s&&n!==this.className&&(n=this.className,i=e(n,t)),this.className=i)})},removeClass:N.classList?function(t){return this.each(function(){this.classList.remove(t)})}:function(t){return t=" "+t,this.each(function(){this.className=(" "+this.className).replace(t,"").trim()})},hasClass:N.classList?function(t){return this.match(function(){return this.classList.contains(t)})}:function(t){return t=" "+t,this.match(function(){return(" "+this.className).indexOf(t)>-1})},toggleClass:function(t,e){var n=this;return e?n.each(function(){var e=r(this);e.hasClass(t)?e.removeClass(t):e.addClass(t)}):r(n[0]).hasClass(t)?n.removeClass(t):n.addClass(t),this},find:function(t){var e=[];return this.each(function(){e=e.concat(r(t,this).toArray())}),r(e)},contains:function(t){var e=r(),n=r(t);return this.each(function(){var t=this,r=n.match(function(){return t.contains(this)});r&&e.push(this)}),e},attr:function(t,e){function r(t,e){(e===n||null===e)&&(e=""),i.each(function(){return""===e?(this.removeAttribute(t),n):(this.setAttribute(t,e),n)})}var i=this;switch(arguments.length){case 0:var o,a=this[0].attributes;t={};for(var u=0,c=a.length;c>u;++u)o=a[u],t[o.nodeName]=o.nodeValue;return t;case 1:if("object"!=typeof t)return this[0].getAttribute(t);s(t,function(e){r(e,t[e])});break;case 2:r(t,e)}return this},html:function(t){return t===n||null===t?this[0].innerHTML:(t.nodeType?this.clear().append(t):this.each(function(){for(;this.firstChild;)this.removeChild(this.firstChild);this.insertAdjacentHTML("afterbegin",t)}),this)},append:function(t){var e=this.length>1;return this.each("string"==typeof t?function(){this.insertAdjacentHTML("beforeend",t)}:function(){var n=this;t.nodeType?this.appendChild(e?t.cloneNode(!0):t):t instanceof i&&t.each(function(){n.appendChild(this)})})},prepend:function(t){var e=this.length>1;return this.each("string"==typeof t?function(){this.insertAdjacentHTML("afterbegin",t)}:function(){var n=this;t.nodeType?this.insertBefore(e?t.cloneNode(!0):t,this.firstChild):t instanceof i&&t.each(function(){n.insertBefore(this,n.firstChild)})})},remove:function(){return this.each(function(){this.parentNode.removeChild(this)})},clear:function(){return this.each(function(){for(;this.firstChild;)this.removeChild(this.firstChild)})},parent:function(t){var e=r();if(t){var n=r(t).toArray();this.each(function(){n.indexOf(this.parentNode)>-1&&e.push(this.parentNode)})}else this.each(function(){e.push(this.parentNode)});return e},parents:function(t){var e,n=this;return t?(e=r(),r(t).each(function(){var t=this,r=n.match(function(){var e=t.compareDocumentPosition(this);return e&Node.DOCUMENT_POSITION_CONTAINED_BY});r&&e.push(this)})):(e=[],this.match(function(){for(var t;null!==(t=this.parentNode)&&-1===e.indexOf(t);)e.push(t);return!1}),e=r(e)),e},closest:function(t){var e,n=[];return t?(e=r(t).toArray(),this.each(function(){for(var t=this;t;){if(e.indexOf(t)>-1){-1===n.indexOf(t)&&n.push(t);break}t=t.parentNode}}),r(n)):r()},replace:function(t){return this.each("string"==typeof t?function(){this.insertAdjacentHTML("beforebegin",t)}:function(){this.parentNode.insertBefore(t,this)}),this.remove()},css:function(e,r){function i(t){a.each(function(){this.style.removeProperty(t)})}function o(t,e){a.each(function(){this.style[t]=e})}var a=this;if("object"==typeof e)s(e,function(t,e){return""===e?(i(t),n):(o(f(t),e),n)});else{if(!e)return t.getComputedStyle(this[0]);if(r)o(f(e),r);else{if(""!==r)return t.getComputedStyle(this[0]).getPropertyValue(e);i(e)}}return this},data:function(){function t(t,e){var r=c(e),i=null;if(""===e||"undefined"===r||"null"===r){if(this._data[t])return delete this._data[t],n;i=function(){delete this.dataset[t]}}else{if("string"!==r&&"number"!==r)return this._data[t]=e,n;i=function(){this.dataset[t]=e}}this.each(i)}function e(t){if(!this[0])return null;var e=this[0],n={};return t?this._data[t]?this._data[t]||null:e.dataset[t]||null:(s(e.dataset,function(t,e){n[t]=e}),o(n,this._data),n)}function r(t,e){if(c(e),c(e,["string","number","undefined","null"])){if(""===e&&this._data[t])return delete this._data[t],null;this.attr("data-"+t,e)}else this._data[t]=e}function i(t){if(!this[0])return null;var e,n={},r="data-",i=this[0],o=i.attributes,a=0,u=o.length;if(!i)return null;if(this._data[t])return this._data[t];if(t)return r+=t,this.attr(r);for(;u>a;++a)e=o[a].name,e.indexOf(r)>-1&&(t=e.substr(5,e.length),n[t]=o[a].value);return s(this._data,function(t,e){n[t]=e}),n}var a=N.dataset,u=a?e:i,h=a?t:r;return function(t,e){var n=this;switch(arguments.length){case 0:return u.call(this);case 1:return"object"==typeof t?(s(t,function(t,e){h.call(n,t,e)}),this):u.call(this,t);case 2:return h.call(this,t,e),this}}}(),show:function(t){var e=this.css("display"),n=this._data.lastDisplay||null;if("none"===e)return this.css("display",t||n||"block")},hide:function(){var t=this.css("display");return"none"!==t&&(this._data.lastDisplay=t),this.css("display","none")},trigger:function(t,e,n,r){return this.each(function(){C(this,t,e,n,r)}),this},offset:function(){var e=[];return this.each(function(n){var r=this.getBoundingClientRect();e[n]={left:r.left+t.pageXOffset,top:r.top+t.pageYOffset}}),1===this.length?e[0]:e},width:function(){return this[0].offsetWidth},height:function(){return this[0].offsetHeight}},t[E]=t[E]||r})(this.self||global,document);