/** tt.js version:0.2.0 author:kei takahashi(twitter@dameleon) at:2013-03-25 */
(function(t,e,n,r,i){"use strict";function s(t,s){var a=null,c="";if("string"==typeof t)c=t,s=s||e,a=p.test(t)?s.querySelectorAll(t):"#"===t[0]?[s.getElementById(t.substring(1,t.length))]:"."===t[0]?s.getElementsByClassName(t.substring(1,t.length)):s.getElementsByTagName(t);else if(t)if(1===t.nodeType)a=[t];else if(r(t)||n(t)&&t.length&&t[0].nodeType)a=t;else{if(t!==e&&t!==e.body){if("function"==typeof t)return g?t():y.push(t),i;if(t instanceof o)return t;throw Error("argument type error")}a=[e.body]}return new o(a||[],c)}function o(t,e){var n,r=0;for(this.selector=e,this.length=n=t.length,this._delegates={},this._data={};n>r;++r)this[r]=t[r];return this}function a(t){return this.each(function(){this.classList.add(t)})}function c(t){function e(t,e){var n=t.split(" ");return n[n.length]=e,n.join(" ")}var n=this[0].className,r=e(n,t);return this.each(function(i){s(this).hasClass(t)||(i&&n!==this.className&&(n=this.className,r=e(n,t)),this.className=r)})}function u(t){return this.each(function(){this.classList.remove(t)})}function h(t){return t=" "+t,this.each(function(){this.className=(" "+this.className).replace(t,"").trim()})}function l(t){var e=this.match(function(){return this.classList.contains(t)});return e?!0:!1}function f(t){return this.match(function(){return(" "+this.className+" ").indexOf(" "+t+" ")>-1})}var d="tt",p=/^(.+[\#\.\s\[\*>:,]|[\[:])/,g=!1,y=[],m=e.createElement("div");Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),r=n.length;return function(i){if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError("Object.keys called on non-object");var s,o=[];for(s in i)t.call(i,s),o.push(s);if(e){for(s=0;r>s;s++)t.call(i,n[s]),o.push(n[s]);return o}}}()),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Node.contains||(Node.contains=function(t){var e=this.compareDocumentPosition(t);return 0===e||e&Node.DOCUMENT_POSITION_CONTAINED_BY}),e.addEventListener("DOMContentLoaded",function(){g=!0;for(var t=0,e=y.length;e>t;++t)y[t]()},!1),s.isArray=n,s.isNodeList=r,s.type=function(i,s){var o=null===i?"null":i===void 0?"undefined":i===t?"global":i===e?"document":i.nodeType?"node":n(i)?"array":r(i)?"nodelist":"";if(o||(o=typeof i,"object"===o&&(o=Object.prototype.toString.call(i).toLowerCase().match(/.*\s([a-z]*)\]/)[1])),s){if(n(s)){for(var a=0,c=s.length;c>a;++a)if(s[a]===o)return!0;return!1}return s===o}return o},s.each=function(t,e){var r,i,s,o=0;if(n(t))for(s=t.length;s>o;++o)e(t[o],o);else if("object"==typeof t)for(r=Object.keys(t),s=r.length;s>o;++o)i=r[o],e(i,t[i])},s.match=function(t,e){var r,i,s,o={},a=0;if(n(t)){for(s=t.length;s>a;++a)if(e(t[a],a))return t[a]}else if("object"==typeof t)for(r=Object.keys(t),s=r.length;s>a;++a)if(i=r[a],e(i,t[i],a))return o[i]=t[i],o;return null},s.extend=function(){function t(t){a&&s.type(n[t],"object")&&s.type(e[t],"object")?s.extend(n[t],e[t]):n[t]=e[t]}var e,n,r=[].slice.call(arguments),i=1,o=r.length,a=!1;for(r[0]===!0&&(a=!0,++i),n=r[i-1]||{};o>i;++i)e=r[i],"object"===s.type(e)&&s.each(Object.keys(e),t);return n},s.proxy=function(){if(2>arguments.length)throw Error("Error: missing argument error");var t,e=[].slice.call(arguments),n=e.shift(),r=e.shift();return"string"==typeof r&&(t=n[r],r=n,n=t),function(){return n.apply(r,e)}},s.parseJSON=function(t){if(!t)return{};if("object"==typeof t)return t;var e;try{return e=JSON.parse(t)}catch(n){}try{e=Function("return "+t)()}catch(r){throw Error("Error: can't parse text to json")}return e},s.query2object=function(t){if(!s.type(t,"string"))return{};"?"===t[0]&&(t=t.substr(1,t.length));for(var e={},n=t.split("&"),r=0,i=n.length;i>r;++r){var o=n[r].split("=");e[o[0]]=o[1]}return e},s.param=function(t){if(!s.type(t,"object"))return t;for(var e,n=Object.keys(t),r=0,i=n.length,o=[];i>r;++r)e=n[r],o.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return o.join("&")},s.triggerEvent=function(t,n,r,s,o){if(!t||!n)throw Error("Error: missing argument error");"string"!=typeof r&&(r=n,n="click"===r?"MouseEvents":"Event");var a=e.createEvent(n);a.initEvent(r,s===i?!1:s,o===i?!1:o),t.dispatchEvent(a)},s.cssPrefix=function(t,e){var n=[];return e=e||["webkit","moz","o","ms","khtml"],s.each(e,function(e,r){n[r]="-"+e+"-"+t}),n},s.cssCamelizer=function(t){if(!t||"string"!=typeof t)throw Error("Error: argument error");var e="";return"-"===t[0]&&(t=t.substr(1,t.length)),s.each(t.split("-"),function(t,n){return n?(e+=t[0].toUpperCase()+t.substr(1,t.length),i):(e+=t,i)}),e},s.cssHyphenizer=function(t){if(!t||"string"!=typeof t)throw Error("Error: argument error");var e=["webkit","moz","o","ms","khtml"],n=/[A-Z]/g,r=t.match(n),o="";return s.each(t.split(n),function(t,n){return e.indexOf(t)>-1?(o+="-"+t,i):n?(o+="-"+r.shift().toLowerCase()+t,i):(o+=t,i)}),o},s.tag=function(t,n){if(!t||"string"!=typeof t)throw Error("Error: argument error");var r=e.createElement(t);return n?r:s(r)},s.createEnvData=function(e){function n(t){if(!t)return null;var e,n=4,r=0;return t=t.replace(/\D/g,""),r=n-t.length,e=r>0?+t*Math.pow(10,r):+t}var r={},i=(e||t.navigator).userAgent.toLowerCase();return r.android=/android/.test(i),r.ios=/ip(hone|od|ad)/.test(i),r.android||r.ios||(r.windowsPhone=/windows\sphone/.test(i),r.ie=/msie/.test(i)),r.chrome=/(chrome|crios)/.test(i),r.firefox=/firefox/.test(i),r.opera=/opera/.test(i),r.androidBrowser=!r.chrome&&r.android&&/applewebkit/.test(i),r.mobileSafari=!r.chrome&&r.ios&&/applewebkit/.test(i),r.version=r.androidBrowser||r.android&&r.chrome?i.match(/android\s(\S.*?)\;/):r.mobileSafari||r.ios&&r.chrome?i.match(/os\s(\S.*?)\s/):null,r.version=r.version?r.ios?r.version[1].replace("_","."):r.version[1]:null,r.versionCode=n(r.version),r.supportTouch="ontouchstart"in t,r},s.env=s.createEnvData(navigator),s.ajax=function(t,n){function r(t){if(!i){i=!0;var e,r=n.context;t>=200&&400>t?(e=o.response||o.responseText,"json"===n.dataType&&s.type(e,"string")&&(e=s.parseJSON(e)),n.success&&n.success.apply(r,[e,t,o])):n.error&&n.error.apply(r,[o,t]),n.complete&&n.complete.apply(r,[o,t]),o=null}}var i=!1,o=new XMLHttpRequest;if(n=n||{},s.type(t,"object"))n=t;else{if(!s.type(t,"string"))throw Error("Error: missing argument");n.url=t}if(n=s.extend({async:!0,beforeSend:null,cache:!0,complete:null,contentType:"application/x-www-form-urlencoded; charset=UTF-8",context:e.body,data:null,dataType:"text",error:null,headers:null,mimeType:null,success:null,timeout:0,type:"GET",url:"",user:"",password:""},n),n.type=n.type.toUpperCase(),n.data&&"GET"===n.type?(n.url=n.url+n.url.indexOf("?")>-1?"&":"?"+s.param(n.data),n.data=null):n.data=s.param(n.data),o.onerror=function(){r(0)},o.onreadystatechange=function(){4===o.readyState&&r(o.status)},o.open(n.type,n.url,n.async,n.user,n.password),"POST"===n.type&&(o.setRequestHeader("Content-type",n.contentType),o.setRequestHeader("Content-length",n.data.length)),s.type(n.headers,"object")&&s.each(n.headers,function(t,e){o.setRequestHeader(t,e)}),n.dataType)try{o.responseType=n.dataType}catch(a){o.responseType="text"}return n.mimeType&&o.overrideMimeType(n.mimeType),n.beforeSend&&n.beforeSend(o),n.timeout&&(o.timeout=n.timeout),o.send(n.data),o},s.fn=o.prototype={constructor:o,get:function(t){return this[t||0]},toArray:function(){var t=[];return this.each(function(e){t[e]=this}),t},each:function(t){for(var e=0,n=this.length;n>e;++e)t.call(this[e],e);return this},match:function(t){for(var e=0,n=this.length;n>e;++e)if(t.call(this[e],e))return this[e];return null},push:function(t){if(t&&t.nodeType)this[this.length]=t,++this.length;else if(s.type(t,["array","nodelist"]))for(var e=0,n=t.length;n>e;++e)this[this.length]=t[e],++this.length;return this},indexOf:function(t){var e=-1;return this.match(function(n){return this===t?(e=n,!0):!1}),e},on:function(t,e,n){return s.type(e,"string")?this.delegate(t,e,n):this.bind(t,e),this},off:function(t,e,n){return s.type(e,"string")?this.undelegate(t,e,n):this.unbind(t,e),this},bind:function(t,e,n){return n=n||!1,this.each(function(){this.addEventListener(t,e,n)},!0),this},unbind:function(t,e){return this.each(function(){this.removeEventListener(t,e)},!0),this},delegate:function(t,e,n){var r=this._delegates[t],i={target:e,callback:n};return r||(r=this._delegates[t]={},r.listeners=[],r.handler=function(t){var e=t.target;s.match(r.listeners,function(n){var r=s(n.target).match(function(){return this.contains(e)?!0:!1});return r?("function"==typeof n.callback?n.callback.call(r,t):"handleEvent"in n.callback&&n.callback.handleEvent.call(r,t),!0):!1})},this.bind(t,r.handler)),r.listeners.push(i),this},undelegate:function(t,e,n){var r=this._delegates[t],i=r.listeners;return i&&0!==i.length?(s.match(i,function(t,r){return t.target===e&&t.callback===n?(i.splice(r,1),!0):!1}),0===i.length&&(this.unbind(t,r.handler),r=this._delegates[t]={}),this):this},addClass:m.classList?a:c,removeClass:m.classList?u:h,hasClass:m.classList?l:f,toggleClass:function(t,e){var n=this;return e?n.each(function(){var e=s(this);e.hasClass(t)?e.removeClass(t):e.addClass(t)}):s(n[0]).hasClass(t)?n.removeClass(t):n.addClass(t),this},find:function(t){var e=[];return this.each(function(){e=e.concat(s(t,this).toArray())}),s(e)},contains:function(t){var e=s(),n=s(t);return this.each(function(){var t=this,r=n.match(function(){return t.contains(this)});r&&e.push(this)}),e},attr:function(t,e){function n(t,e){(e===i||null===e)&&(e=""),r.each(function(){return""===e?(this.removeAttribute(t),i):(this.setAttribute(t,e),i)})}var r=this;switch(arguments.length){case 0:var o,a=this[0].attributes;t={};for(var c=0,u=a.length;u>c;++c)o=a[c],t[o.nodeName]=o.nodeValue;return t;case 1:if("object"!=typeof t)return this[0].getAttribute(t);s.each(t,function(e){n(e,t[e])});break;case 2:n(t,e)}return this},html:function(t){return t===i||null===t?this[0].innerHTML:(t.nodeType?this.clear().append(t):this.each(function(){for(;this.firstChild;)this.removeChild(this.firstChild);this.insertAdjacentHTML("afterbegin",t)}),this)},append:function(t){return this.each("string"==typeof t?function(){this.insertAdjacentHTML("beforeend",t)}:function(){var e=this;t.nodeType?this.appendChild(t.cloneNode(!0)):t instanceof o&&t.each(function(){e.appendChild(this)})})},prepend:function(t){return this.each("string"==typeof t?function(){this.insertAdjacentHTML("afterbegin",t)}:function(){var e=this;t.nodeType?this.insertBefore(t.cloneNode(!0),this.firstChild):t instanceof o&&t.each(function(){e.insertBefore(this,e.firstChild)})})},remove:function(){return this.each(function(){this.parentNode.removeChild(this)})},clear:function(){return this.each(function(){for(;this.firstChild;)this.removeChild(this.firstChild)})},parent:function(t){var e=s();if(t){var n=s(t).toArray();this.each(function(){n.indexOf(this.parentNode)>-1&&e.push(this.parentNode)})}else this.each(function(){e.push(this.parentNode)});return e},parents:function(t){var e,n=this;return t?(e=s(),s(t).each(function(){var t=this,r=n.match(function(){var e=t.compareDocumentPosition(this);return e&Node.DOCUMENT_POSITION_CONTAINED_BY});r&&e.push(this)})):(e=[],this.match(function(){for(var t;null!==(t=this.parentNode)&&-1===e.indexOf(t);)e.push(t);return!1}),e=s(e)),e},closest:function(t){var e,n=[];return t?(e=s(t).toArray(),this.each(function(){for(var t=this;t;){if(e.indexOf(t)>-1){-1===n.indexOf(t)&&n.push(t);break}t=t.parentNode}}),s(n)):s()},replace:function(t){return this.each("string"==typeof t?function(){this.insertAdjacentHTML("beforebegin",t)}:function(){this.parentNode.insertBefore(t,this)}),this.remove()},css:function(e,n){function r(t){a.each(function(){this.style.removeProperty(t)})}function o(t,e){a.each(function(){this.style[t]=e})}var a=this;if("object"==typeof e)s.each(e,function(t,e){return""===e?(r(t),i):(o(s.cssCamelizer(t),e),i)});else{if(!e)return t.getComputedStyle(this[0]);if(n)o(s.cssCamelizer(e),n);else{if(""!==n)return t.getComputedStyle(this[0]).getPropertyValue(e);r(e)}}return this},data:function(){function t(t,e){var n=s.type(e),r=null;if(""===e||"undefined"===n||"null"===n){if(this._data[t])return delete this._data[t],i;r=function(){delete this.dataset[t]}}else{if("string"!==n&&"number"!==n)return this._data[t]=e,i;r=function(){this.dataset[t]=e}}this.each(r)}function e(t){if(!this[0])return null;var e=this[0],n={};return t?this._data[t]?this._data[t]||null:e.dataset[t]||null:(s.each(e.dataset,function(t,e){n[t]=e}),s.extend(n,this._data),n)}function n(t,e){if(s.type(e),s.type(e,["string","number","undefined","null"])){if(""===e&&this._data[t])return delete this._data[t],null;this.attr("data-"+t,e)}else this._data[t]=e}function r(t){if(!this[0])return null;var e,n={},r="data-",i=this[0],o=i.attributes,a=0,c=o.length;if(!i)return null;if(this._data[t])return this._data[t];if(t)return r+=t,this.attr(r);for(;c>a;++a)e=o[a].name,e.indexOf(r)>-1&&(t=e.substr(5,e.length),n[t]=o[a].value);return s.each(this._data,function(t,e){n[t]=e}),n}var o=m.dataset,a=o?e:r,c=o?t:n;return function(t,e){var n=this;switch(arguments.length){case 0:return a.call(this);case 1:return"object"==typeof t?(s.each(t,function(t,e){c.call(n,t,e)}),this):a.call(this,t);case 2:return c.call(this,t,e),this}}}(),show:function(t){var e=this.css("display"),n=this._data.lastDisplay||null;if("none"===e)return this.css("display",t||n||"block")},hide:function(){var t=this.css("display");return"none"!==t&&(this._data.lastDisplay=t),this.css("display","none")},trigger:function(t,e,n,r){return this.each(function(){s.triggerEvent(this,t,e,n,r)}),this},offset:function(){var e=[];return this.each(function(n){var r=this.getBoundingClientRect();e[n]={left:r.left+t.pageXOffset,top:r.top+t.pageYOffset}}),1===this.length?e[0]:e},width:function(){return this[0].offsetWidth},height:function(){return this[0].offsetHeight}},t[d]=t[d]||s})(this.self||global,document,Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),function(t){var e=Object.prototype.toString.call(t);return"[object NodeList]"===e||"[object HTMLCollection]"===e});